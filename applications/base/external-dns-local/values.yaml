env:
  - name: EXTERNAL_DNS_RFC2136_TSIG_SECRET
    valueFrom:
      secretKeyRef:
        name: external-dns-credentials
        key: EXTERNAL_DNS_RFC2136_TSIG_SECRET
sources:
  - ingress
  - service
  - crd
policy: sync
provider: rfc2136
extraArgs:
  - --rfc2136-host=10.0.0.1
  - --rfc2136-port=53
  - --rfc2136-zone=home.macro.network
  - --rfc2136-tsig-keyname=home.macro.network
  - --rfc2136-tsig-secret-alg=hmac-sha256
  # - --rfc2136-tsig-axfr
  - --crd-source-apiversion=externaldns.k8s.io/v1alpha1
  - --crd-source-kind=DNSEndpoint

logFormat: json
logLevel: debug

rbac:
  create: true
  additionalPermissions:
    - apiGroups: ["externaldns.k8s.io"]
      resources: ["dnsendpoints"]
      verbs: ["get","watch","list"]
    - apiGroups: ["externaldns.k8s.io"]
      resources: ["dnsendpoints/status"]
      verbs: ["*"]
