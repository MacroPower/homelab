apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: metallb

helmCharts:
  - name: metallb
    repo: https://metallb.github.io/metallb
    version: '0.13.9'
    releaseName: metallb
    namespace: metallb
    includeCRDs: true

    # https://github.com/metallb/metallb/blob/main/charts/metallb/values.yaml
    valuesInline:
      controller:
        resources:
          requests:
            cpu: 100m
            memory: 100Mi
          limits:
            cpu: 100m
            memory: 100Mi

      speaker:
        resources:
          requests:
            cpu: 100m
            memory: 100Mi
          limits:
            cpu: 100m
            memory: 100Mi

      prometheus:
        namespace: observability
        serviceAccount: kube-prometheus-stack-prometheus

        serviceMonitor:
          enabled: true

resources:
  - namespace.yaml
