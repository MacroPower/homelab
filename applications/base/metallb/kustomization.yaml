apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: kube-system

helmCharts:
  - name: metallb
    repo: https://metallb.github.io/metallb
    version: '0.13.7'
    releaseName: metallb
    namespace: kube-system
    includeCRDs: true

    # https://github.com/metallb/metallb/blob/main/charts/metallb/values.yaml
    valuesInline:
      prometheus:
        namespace: observability
        serviceAccount: kube-prometheus-stack-prometheus

        serviceMonitor:
          enabled: true
