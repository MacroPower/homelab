apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
  - name: linkerd-control-plane
    repo: https://helm.linkerd.io/edge
    version: '1.11.2-edge'
    releaseName: linkerd-control-plane
    namespace: linkerd

    # https://github.com/linkerd/linkerd2/blob/main/charts/linkerd-control-plane/values.yaml
    valuesInline:
      cniEnabled: false

      identity:
        issuer:
          scheme: kubernetes.io/tls

      identityTrustAnchorsPEM: |-
        -----BEGIN CERTIFICATE-----
        MIIBsjCCAVmgAwIBAgIRAIQ8sqNHU0eWvf0GognexLAwCgYIKoZIzj0EAwIwJTEj
        MCEGA1UEAxMacm9vdC5saW5rZXJkLmNsdXN0ZXIubG9jYWwwHhcNMjMwMjA3MDIx
        ODA5WhcNMjQwMjA3MDIxODA5WjApMScwJQYDVQQDEx5pZGVudGl0eS5saW5rZXJk
        LmNsdXN0ZXIubG9jYWwwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAS3OwrW/ulH
        f5/4T0US3YON3ud6H7n45NGmsRPLDZnrh8DPlA06R1uhj3DAxOT77S2yMbeqUXgi
        WHuAFMpR/MGjo2YwZDAOBgNVHQ8BAf8EBAMCAQYwEgYDVR0TAQH/BAgwBgEB/wIB
        ADAdBgNVHQ4EFgQUvHKYzNedHJraeUjxfkFFzdg9raowHwYDVR0jBBgwFoAUnA+k
        guv9BABTTgXBsbnfU9hDTbUwCgYIKoZIzj0EAwIDRwAwRAIgTkI1JtkHcjptn5UK
        PEJyu/f5ckbhbdI0EN/QTgubIikCIFsYUA+mf40Gl9vaq7XsLilDmG01wf8cMH1i
        aeiQ7W0k
        -----END CERTIFICATE-----
