deployment:
  kind: Deployment
  replicas: 3

image:
  tag: v3.0.0-rc5

additionalArguments:
  - --serverstransport.insecureskipverify=true
  - --log.level=INFO
  - --api.dashboard=true
  - --api.insecure=true

ingressRoute:
  dashboard:
    enabled: false

providers:
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: true
    allowExternalNameServices: true
  kubernetesIngress:
    enabled: true
    allowCrossNamespace: true
    allowExternalNameServices: true
    publishedService:
      enabled: true
      pathOverride: traefik/traefik

service:
  additionalServices:
    internal:
      type: ClusterIP

ports:
  traefik:
    expose:
      default: false
      internal: true
  web:
    expose:
      default: true
      internal: true
  websecure:
    expose:
      default: true
      internal: true
    http3:
      enabled: true
    tls:
      enabled: true
  metrics:
    expose:
      default: false
      internal: true

tlsStore:
  default:
    defaultCertificate:
      secretName: traefik-cert

tlsOptions:
  default:
    clientAuth: {}
    minVersion: VersionTLS12

tracing:
  opentelemetry:
    address: main-collector.opentelemetry.svc:4317
    grpc: true
    insecure: true

env:
  - name: HOST_IP
    valueFrom:
      fieldRef:
        fieldPath: status.hostIP
  - name: TRAEFIK_TRACING_OPENTELEMETRY_ADDRESS
    value: "$(HOST_IP):4317"
