controller:
  type: daemonset

image:
  repository: cturra/ntp
  tag: latest
  pullPolicy: IfNotPresent

command: [/bin/sh, /tmp/run.sh]

tolerations:
  - effect: NoSchedule
    operator: Exists
  - key: CriticalAddonsOnly
    operator: Exists
  - effect: NoExecute
    operator: Exists

resources:
  limits:
    memory: 20Mi
    cpu: 10m
  requests:
    cpu: 1m
    memory: 10Mi

securityContext:
  privileged: true
  capabilities:
    add:
      - CAP_SYS_TIME

persistence:
  config:
    enabled: true
    name: chrony
    type: configMap
    subPath:
      - path: run.sh
        mountPath: /tmp/run.sh
        readOnly: true
  state:
    enabled: true
    name: state
    type: hostPath
    hostPath: /var/lib/cronyd

service:
  main:
    enabled: true
    primary: true
    ports:
      http:
        enabled: false
        primary: false
        port: 80
        protocol: HTTP
      ntp:
        enabled: true
        primary: true
        port: 123
        protocol: UDP

probes:
  liveness:
    enabled: false
  readiness:
    enabled: false
  startup:
    enabled: false
