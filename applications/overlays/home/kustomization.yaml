apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

patches:
  - target:
      group: argoproj.io
      version: v1alpha1
      kind: Application
    patch: |-
      - op: add
        path: /metadata/namespace
        value: argocd
      - op: add
        path: /spec/destination/server
        value: https://kubernetes.default.svc
      - op: add
        path: /spec/sources/0/repoURL
        value: https://github.com/MacroPower/homelab
      - op: add
        path: /spec/sources/0/targetRevision
        value: argo-apps

resources:
  - goldilocks
