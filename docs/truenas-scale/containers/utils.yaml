# yaml-language-server: $schema=https://raw.githubusercontent.com/compose-spec/compose-spec/master/schema/compose-spec.json
services:
  utils:
    image: ghcr.io/nicolaka/netshoot:latest
    container_name: utils
    hostname: nas01-utils
    tty: true
    read_only: true
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
      - SYS_ADMIN
      - SYS_PTRACE
      - SYS_RESOURCE
      - SYSLOG
    security_opt:
      - seccomp=unconfined
    tmpfs:
      - /tmp
    volumes:
      - utils_var:/var
      - utils_opt:/opt
    networks:
      shared_macvlan:
        ipv4_address: "10.10.12.2"
        ipv6_address: "fc42:0:0:a::1202"
        mac_address: "e2:a8:1a:c6:45:74"
    dns:
      - "10.10.0.1"
      - "fc42:0:0:a::"
    cpu_percent: 80
    mem_limit: 32g
volumes:
  utils_var: {}
  utils_opt: {}
networks:
  shared_macvlan:
    external: true
    name: shared_macvlan
